<div class="container mx-auto px-4 py-12">
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-gray-800 mb-2">Explorar Projetos</h1>
    <p class="text-gray-600">Descubra projetos incr√≠veis e fa√ßa parte desta jornada</p>
  </div>

  <!-- Se√ß√£o de Filtros -->
  <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Busca -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Buscar Projeto</label>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()"
          placeholder="Digite o nome ou descri√ß√£o..."
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-600"
        />
      </div>

      <!-- Filtro por G√™nero -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Filtrar por Categoria</label>
        <select
          [(ngModel)]="selectedCategoria"
          (change)="onCategoriaChange()"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-600"
        >
          <option value="">Todas as Categorias</option>
          @for (categoria of categorias; track categoria) {
            <option [value]="categoria">{{ categoria }}</option>
          }
        </select>
      </div>
    </div>
  </div>

  <!-- Exibi√ß√£o de Resultados -->
  @if (filteredProjects().length > 0) {
    <div class="mb-4 text-gray-600">
      <p>Mostrando <span class="font-bold">{{ filteredProjects().length }}</span> projeto(s)</p>
    </div>

    <!-- Grade de Projetos -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (project of filteredProjects(); track project.id) {
        <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          <!-- Imagem do Projeto -->
          <div class="relative h-48 overflow-hidden bg-gray-200">
            <img
              [src]="project.imagemUrl"
              [alt]="project.titulo"
              class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
            />
            <div class="absolute top-3 right-3 bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-semibold">
              {{ project.categoria }}
            </div>
          </div>

          <!-- Conte√∫do do Card -->
          <div class="p-5">
            <!-- T√≠tulo -->
            <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">{{ project.titulo }}</h3>

            <!-- Descri√ß√£o Curta -->
            <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ project.descricaoCurta }}</p>

            <!-- Informa√ß√µes do Criador -->
            <div class="flex items-center mb-4 pb-4 border-b">
              <img
                [src]="project.criadorFoto || 'https://ui-avatars.com/api/?name=' + project.criadorNome"
                [alt]="project.criadorNome"
                class="w-8 h-8 rounded-full mr-2 object-cover"
              />
              <div class="flex-1">
                <p class="text-xs text-gray-600">Por</p>
                <p class="text-sm font-semibold text-gray-800">{{ project.criadorNome }}</p>
              </div>
            </div>

            <!-- Progresso da Meta -->
            <div class="mb-4">
              <div class="flex justify-between mb-2">
                <span class="text-sm font-semibold text-gray-800">
                  {{ formatCurrency(project.valorArrecadado) }} de {{ formatCurrency(project.metaValor) }}
                </span>
                <span class="text-sm font-semibold text-indigo-600">
                  {{ (getProgressPercentage(project) | number: '1.0-0') }}%
                </span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                <div
                  class="h-full transition-all duration-300"
                  [ngClass]="getProgressBarColor(getProgressPercentage(project))"
                  [style.width.%]="getProgressPercentage(project) >= 100 ? 100 : getProgressPercentage(project)"
                ></div>
              </div>
            </div>

            <!-- Informa√ß√µes Adicionais -->
            <div class="flex justify-between items-center text-xs text-gray-600 mb-4">
              <span>üë• {{ project.numeroApoiadores || 0 }} apoiadores</span>
              <span>‚è±Ô∏è {{ getDaysLeft(project.dataLimite) }} dias restantes</span>
            </div>

            <!-- Bot√£o de A√ß√£o -->
            <button
              class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition-colors duration-200"
            >
              Ver Detalhes
            </button>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="bg-gray-100 rounded-lg p-12 text-center">
      <p class="text-gray-600 text-lg">Nenhum projeto encontrado. Tente ajustar seus filtros.</p>
    </div>
  }
</div>
