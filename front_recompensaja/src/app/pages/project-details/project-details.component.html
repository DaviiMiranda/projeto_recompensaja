<div *ngIf="project() as project" class="container mx-auto px-4 py-12">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Coluna Principal -->
    <div class="lg:col-span-2">
      <!-- Imagem ou Vídeo -->
      <div class="mb-6">
        <img [src]="project.imagemUrl" [alt]="project.titulo" class="w-full rounded-lg shadow-lg">
      </div>

      <!-- Título e Categoria -->
      <h1 class="text-4xl font-bold text-gray-800 mb-2">{{ project.titulo }}</h1>
      <p class="text-indigo-600 font-semibold mb-4">{{ project.categoria }}</p>

      <!-- Criador -->
      <div class="flex items-center mb-6">
        <img [src]="project.criadorFoto || 'https://ui-avatars.com/api/?name=' + project.criadorNome" [alt]="project.criadorNome" class="w-12 h-12 rounded-full mr-4">
        <div>
          <p class="text-gray-600">Criado por</p>
          <p class="font-bold text-gray-800">{{ project.criadorNome }}</p>
        </div>
      </div>

      <!-- Descrição Completa -->
      <div class="prose max-w-none text-gray-700">
        <p>{{ project.descricaoCompleta }}</p>
      </div>
    </div>

    <!-- Coluna Lateral -->
    <div>
      <!-- Progresso -->
      <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
        <div class="flex justify-between items-center mb-2">
          <span class="text-2xl font-bold text-gray-800">{{ formatCurrency(project.valorArrecadado) }}</span>
          <span class="text-sm text-gray-600">arrecadados</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2">
          <div class="bg-indigo-600 h-2.5 rounded-full" [style.width.%]="getProgressPercentage(project)"></div>
        </div>
        <div class="flex justify-between text-sm">
          <span class="font-semibold">{{ getProgressPercentage(project).toFixed(0) }}%</span>
          <span class="text-gray-600">de {{ formatCurrency(project.metaValor) }}</span>
        </div>
        <div class="mt-4 text-center">
          <p class="text-lg font-semibold">{{ project.numeroApoiadores }}</p>
          <p class="text-sm text-gray-600">apoiadores</p>
        </div>
        <div class="mt-2 text-center">
          <p class="text-lg font-semibold">{{ getDaysLeft(project.dataLimite) }}</p>
          <p class="text-sm text-gray-600">dias restantes</p>
        </div>
      </div>

      <!-- Recompensas -->
      <div *ngIf="project.recompensas && project.recompensas.length > 0">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Recompensas</h2>
        <div class="space-y-4">
          <div *ngFor="let reward of project.recompensas" class="bg-white rounded-lg shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow" (click)="selectReward(reward)">
            <p class="font-bold text-lg">{{ reward.titulo }}</p>
            <p class="text-indigo-600 font-semibold mb-2">{{ formatCurrency(reward.valorMinimo) }} ou mais</p>
            <p class="text-gray-700">{{ reward.descricao }}</p>
            <div *ngIf="reward.itensInclusos" class="mt-2">
              <p class="text-sm font-semibold">Itens inclusos:</p>
              <ul class="list-disc list-inside text-sm text-gray-600">
                <li *ngFor="let item of reward.itensInclusos">{{ item }}</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
