<div *ngIf="publicationData() as publication" class="publication-card">
  <a [routerLink]="['/publicacoes', publication.id]" class="publication-card-link">
    <!-- Header com Avatar e Info do Autor -->
    <div class="publication-header">
      <div class="author-info">
        <div class="author-avatar">
          <img 
            *ngIf="publication.autorFoto; else defaultAvatar" 
            [src]="publication.autorFoto" 
            [alt]="publication.autorNome"
            class="w-full h-full object-cover"
          />
          <ng-template #defaultAvatar>
            <div class="default-avatar">
              {{ publication.autorNome.charAt(0).toUpperCase() }}
            </div>
          </ng-template>
        </div>
        <div class="author-details">
          <h4 class="author-name">{{ publication.autorNome }}</h4>
          <p class="publication-time">{{ getTimeAgo(publication.dataPublicacao) }}</p>
        </div>
      </div>
      
      <!-- Badge do Projeto (se vinculado) -->
      <div *ngIf="publication.projetoTitulo" class="project-badge">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M2 6a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm2 0v8h12V6H4z"/>
        </svg>
        <span>{{ publication.projetoTitulo }}</span>
      </div>
    </div>

    <!-- Título -->
    <h3 class="publication-title">
      {{ publication.titulo }}
    </h3>

    <!-- Conteúdo Resumido -->
    <p class="publication-content">
      {{ truncatedContent() }}
    </p>

    <!-- Imagem (se houver) -->
    <div *ngIf="publication.imagemUrl" class="publication-image">
      <img 
        [src]="publication.imagemUrl" 
        [alt]="publication.titulo"
        class="w-full h-full object-cover"
      />
    </div>

    <!-- Categorias -->
    <div *ngIf="publication.categorias && publication.categorias.length > 0" class="publication-categories">
      <span *ngFor="let categoria of publication.categorias" class="category-tag">
        {{ categoria }}
      </span>
    </div>

    <!-- Footer com Interações -->
    <div class="publication-footer">
      <div class="interaction-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
        </svg>
        <span>{{ publication.likes }}</span>
      </div>
      <div class="interaction-item">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
        <span>{{ publication.comentarios }}</span>
      </div>
    </div>
  </a>
</div>
